(this["webpackJsonptutesuite-frontend"]=this["webpackJsonptutesuite-frontend"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var s=n(2),r=n.n(s),a=n(19),i=n.n(a),c=(n(42),n(7)),o=n(8),u=n(10),l=n(9),h=(n(43),n(1)),p=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{className:this.props.light?"":"bg-dark text-white",children:this.props.children})}}]),n}(s.Component),d=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(h.jsx)(p,{light:this.props.light,children:Object(h.jsx)("header",{className:"p-3",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start",children:[Object(h.jsx)("a",{href:"",className:"d-flex align-items-center mb-2 mb-lg-0 text-decoration-none mx-3",children:"TuteSuite"}),Object(h.jsx)("div",{className:"text-end",children:Object(h.jsx)(p,{light:this.props.light,children:this.props.children})})]})})})})}}]),n}(s.Component),j=n(92),b=n(75),f=n(76),g=n(77),O=n(78),m=n(79),x=n(80),_=n(81),v=n(82),y=n(83),w=n(37),k=function(e){return function(t){e.setState(Object(w.a)({},t.target.name,t.target.value))}},q=function(e){return"030F-95139B24F-D7846C058AEA-"+JSON.stringify(e)},C=n(12),N=n.n(C),S=n(16),A=n(17),E=n.n(A),L="https://tutesuite-backend.herokuapp.com/",T=function(e){return{headers:{Authorization:"Token "+e,"Content-type":"application/json"}}},F=function(e){return function(){var t=Object(S.a)(N.a.mark((function t(n,s){var r,a,i,c,o,u,l,h,p;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.token,a=e.user,t.t0=n,t.next="get_requests"===t.t0?4:"get_request"===t.t0?5:"create_request"===t.t0?7:"accept_req"===t.t0?9:"end_session"===t.t0?12:"clear_balance"===t.t0?14:16;break;case 4:return t.abrupt("return",B(r));case 5:return i=s.rid,t.abrupt("return",W(r,i));case 7:return c=s.description,o=s.subject,t.abrupt("return",J(r,{description:c,subject:o,student:a.student[0].id,active:!0}));case 9:return u=s.req,l=a.tutor[0].id,t.abrupt("return",Y(r,u,l));case 12:return h=s.sid,t.abrupt("return",D(r,h));case 14:return p=s.sid,t.abrupt("return",P(r,p));case 16:case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},P=function(e,t){E.a.post(L+"api/clear_balance/"+t,T(e))},D=function(e,t){E.a.post(L+"api/end_session/"+t,T(e))},J=function(){var e=Object(S.a)(N.a.mark((function e(t,n){var s,r,a,i,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.description,r=n.subject,a=n.student,i=n.active,e.next=3,E.a.post(L+"api/requests",{description:s,subject:r,student:a,active:i},T(t));case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(S.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(L+"api/requests",T(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(S.a)(N.a.mark((function e(t,n){var s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(L+"api/requests/"+n,T(t));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(S.a)(N.a.mark((function e(t,n,s){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(L+"api/accept/"+n+"/"+s,T(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),R=function(){var e=Object(S.a)(N.a.mark((function e(t){var n,s,r,a,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,s=t.email,r=t.password,a=t.first_name,i=t.last_name,e.abrupt("return",E.a.post(L+"api/users",{username:n,password:r,email:s,first_name:a,last_name:i,student:[],tutor:[]}).then((function(e){U(n,r)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(S.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(L+"api/token-auth/",{username:t,password:n},{headers:{"Content-type":"application/json"}}).then(function(){var e=Object(S.a)(N.a.mark((function e(n){var s,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.data.token,e.next=3,M(s,t);case 3:return r=e.sent,e.abrupt("return",{user:r,token:s});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(S.a)(N.a.mark((function e(t,n){var s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get(L+"api/username/"+n+"/",{headers:{Authorization:"Token "+t,"Content-type":"application/json"}});case 3:return s=e.sent,e.abrupt("return",s.data);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).login_fail=function(e){s.setState({show_login_err:!0,login_err:e.toString()})},s.login_success=function(e){s.props.toggle(),s.props.login_success(e)},s.state={show_login_err:!1,login_err:"",username:"",password:""},s}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.toggle,n=this.state,s=n.login_err,r=n.show_login_err;return Object(h.jsxs)(j.a,{isOpen:!0,toggle:t,children:[Object(h.jsx)(b.a,{toggle:t,children:"Log in to TuteSuite"}),Object(h.jsxs)(f.a,{children:[Object(h.jsxs)(g.a,{children:[Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"user-username",children:"Username"}),Object(h.jsx)(x.a,{type:"text",id:"user-username",name:"username",placeholder:"Enter Your username",onChange:k(this)})]}),Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"user-password",children:"Password"}),Object(h.jsx)(x.a,{type:"password",id:"user-password",name:"password",placeholder:"Enter Password",onChange:k(this)})]})]}),Object(h.jsx)(_.a,{color:"danger",hidden:!r,children:s})]}),Object(h.jsx)(v.a,{children:Object(h.jsx)(y.a,{color:"success",onClick:function(){U(e.state.username,e.state.password).then(e.login_success).catch(e.login_fail)},children:"Login"})})]})}}]),n}(s.Component),z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).modal_toggle=function(){s.setState({login_modal:!s.state.login_modal})},s.state={login_modal:!1},s}return Object(o.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"d-inline",children:[Object(h.jsx)("button",{type:"button",className:this.props.className,onClick:this.modal_toggle,children:this.props.children}),this.state.login_modal?Object(h.jsx)(X,{toggle:this.modal_toggle,login_success:this.props.handle_login}):null]})}}]),n}(s.Component),I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).signup_fail=function(e){s.setState({show_signup_err:!0,signup_err:e.toString()})},s.signup_success=function(e){s.props.toggle(),s.props.signup_success(e)},s.state={show_signup_err:!1,signup_err:"",username:"",password:"",email:"",first_name:"",last_name:""},s}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.toggle,n=this.state,s=n.signup_err,r=n.show_signup_err,a=n.email,i=n.username,c=n.password,o=n.first_name,u=n.last_name;return Object(h.jsxs)(j.a,{isOpen:!0,toggle:t,children:[Object(h.jsx)(b.a,{toggle:t,children:"Sign up to TuteSuite"}),Object(h.jsxs)(f.a,{children:[Object(h.jsxs)(g.a,{children:[Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"user-username",children:"Username"}),Object(h.jsx)(x.a,{type:"text",id:"user-username",name:"username",placeholder:"Enter Your username",onChange:k(this)})]}),Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"user-password",children:"Password"}),Object(h.jsx)(x.a,{type:"password",id:"user-password",name:"password",placeholder:"Enter Password",onChange:k(this)})]}),Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"user-email",children:"Email"}),Object(h.jsx)(x.a,{type:"email",id:"user-email",name:"email",placeholder:"Enter Email",onChange:k(this)})]}),Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"user-first-name",children:"First Name"}),Object(h.jsx)(x.a,{type:"text",id:"user-first-name",name:"first_name",placeholder:"Enter First Name",onChange:k(this)})]}),Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"user-last-name",children:"Last Name"}),Object(h.jsx)(x.a,{type:"text",id:"user-last-name",name:"last_name",placeholder:"Enter Last Name",onChange:k(this)})]})]}),Object(h.jsx)(_.a,{color:"danger",hidden:!r,children:s})]}),Object(h.jsx)(v.a,{children:Object(h.jsx)(y.a,{color:"success",onClick:function(){R({username:i,password:c,first_name:o,last_name:u,email:a}).then(e.signup_success).catch(e.signup_fail)},children:"Sign Up"})})]})}}]),n}(s.Component),H=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).modal_toggle=function(){s.setState({signup_modal:!s.state.signup_modal})},s.state={signup_modal:!1},s}return Object(o.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"d-inline",children:[Object(h.jsx)("button",{type:"button",className:this.props.className,onClick:this.modal_toggle,children:this.props.children}),this.state.signup_modal?Object(h.jsx)(I,{toggle:this.modal_toggle,signup_success:this.props.handle_signup}):null]})}}]),n}(s.Component),K=n(84),Q=n(85),V=n(86),Z=n(23),G=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).toggle=function(){e.props.toggle(),e.props.api("end_session",{sid:e.props.sid})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(h.jsx)(j.a,{isOpen:!0,toggle:this.toggle,children:Object(h.jsx)(Z.a,{roomName:q(this.props.sid),config:{prejoinPageEnabled:!1}})})}}]),n}(s.Component),$=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).create_request=function(){console.log(s.state),s.props.api("create_request",{description:s.state.description,subject:s.state.subject}).then(s.handle_request).catch(s.handle_fail)},s.handle_request=function(e){console.log(e),s.setState({active_request:e})},s.refresh=function(){s.props.api("get_request",{rid:s.state.active_request.id}).then((function(e){s.setState({active_request:e})}))},s.handle_fail=function(e){console.log(e)},s.toggle=function(){s.setState({active_request:null})},s.state={active_request:!1,description:"",subject:""},s}return Object(o.a)(n,[{key:"render",value:function(){return this.state.active_request?0===this.state.active_request.session.length?Object(h.jsxs)("div",{children:["Pending: ",Object(h.jsx)("br",{}),Object(h.jsx)(V.a,{}),Object(h.jsx)("br",{}),Object(h.jsx)(y.a,{onClick:this.refresh,children:"Refresh"})]}):Object(h.jsx)(G,{toggle:this.toggle,sid:this.state.active_request.id,api:this.props.api}):Object(h.jsxs)(K.a,{className:"justify-content-center",children:[Object(h.jsx)("h2",{className:"display-5 fw-bold",children:"Request a Tutor"}),Object(h.jsx)(Q.a,{className:"my-5",lg:7,children:Object(h.jsxs)(g.a,{children:[Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"request-subject",children:"Enter Your Subject"}),Object(h.jsx)(x.a,{type:"text",id:"request-subject",name:"subject",onChange:k(this)})]}),Object(h.jsxs)(O.a,{children:[Object(h.jsx)(m.a,{for:"request-description",children:"Enter Your Description"}),Object(h.jsx)(x.a,{type:"text",id:"request-description",name:"description",onChange:k(this)})]}),Object(h.jsx)(y.a,{color:"primary",className:"my-2",onClick:this.create_request,children:"Submit Request"})]})})]})}}]),n}(s.Component),ee=(s.Component,n(87)),te=n(88),ne=n(89),se=n(90),re=n(91),ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).try_accept_req=function(e){return function(){s.props.api("accept_req",{req:e}).then((function(e){s.setState({current_session:e})}))}},s.toggle=function(){s.setState({current_session:null})},s.state={current_session:null},s}return Object(o.a)(n,[{key:"render",value:function(){var e,t,n=this.props.req,s=this.state.current_session;return Object(h.jsxs)(ee.a,{className:this.props.light?"bg-white":"bg-secondary",children:[this.state.current_session?Object(h.jsx)(G,{toggle:this.toggle,api:this.props.api,sid:s.id}):null,Object(h.jsxs)(te.a,{children:[Object(h.jsx)(ne.a,{tag:"h5",children:n.student.user.username}),Object(h.jsx)(se.a,{tag:"h6",className:"mb-2 text-muted",children:n.description}),Object(h.jsxs)(re.a,{children:["Subject: ",Object(h.jsx)("code",{children:n.subject.name})," ",Object(h.jsx)("br",{}),"Date: ",Object(h.jsx)("code",{children:n.date})," ",Object(h.jsx)("br",{}),"Active: ",Object(h.jsx)("code",{children:JSON.stringify(n.active)})," ",Object(h.jsx)("br",{}),Object(h.jsx)("a",{href:(e="https://meet.jit.si",t=n.id,e+"/"+q(t)),children:"Link"})," ",Object(h.jsx)("br",{}),Object(h.jsx)(y.a,{onClick:this.try_accept_req(n.id),children:"Accept"})]})]})]})}}]),n}(s.Component),ie=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handle_requests=function(e){s.setState({requests:e,hide_failure:!0})},s.handle_request_fail=function(e){s.setState({hide_failure:!0,request_failure:JSON.stringify(e)})},s.refresh=function(){s.props.api("get_requests",null).then(s.handle_requests).catch(s.handle_request_fail)},s.render=function(){return Object(h.jsxs)(K.a,{className:"justify-content-center",children:[Object(h.jsx)("h2",{className:"display-5 fw-bold",children:"Tutor a Student"}),Object(h.jsxs)(Q.a,{className:"my-5",lg:7,children:[Object(h.jsx)(y.a,{onClick:s.refresh,children:"Refresh"}),s.state.current_session?Object(h.jsx)("p",{children:"Session"}):Object(h.jsxs)("div",{children:[Object(h.jsx)(_.a,{color:"danger",hidden:s.state.hide_failure,children:s.state.request_failure}),Object(h.jsx)("div",{className:"lead mb-4",children:s.state.requests.map((function(e,t){return Object(h.jsx)(ae,{req:e,light:s.props.light,api:s.props.api},t)}))})]})]})]})},s.state={requests:[{date:"Date",subject:"Subject",student:"Student",accepted_tutors:"Accepted Tutors",active:"Active",pk:"Key"}],hide_failure:!0,request_failure:""},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refresh()}}]),n}(s.Component),ce=n(24),oe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).createOrder=function(t,n){return n.order.create({purchase_units:[{amount:{value:e.props.money.toFixed(2)}}]})},e.onApprove=function(t,n){return e.props.api("clear_balance",{sid:e.props.sid}),n.order.capture()},e}return Object(o.a)(n,[{key:"render",value:function(){return this.props.money?Object(h.jsx)(j.a,{isOpen:!0,children:Object(h.jsx)(ce.b,{options:{"client-id":"AbawBp9wAWuryEAt7W8fZv-4YcCWX00HBp-v7rmCQNVl_pxXeM08CWtmWp1qrLkwvv85oNvaXJpD_v4d"},children:Object(h.jsx)(ce.a,{createOrder:this.createOrder,onApprove:this.onApprove})})}):null}}]),n}(s.Component),ue=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handle_login=function(e){var t=e.token,n=e.user;s.setState({is_logged_in:!0,token:t,user:n,api:F(e)})},s.state={is_logged_in:!1,token:null,user:null,api:null,light:!0},s}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)("header",{children:Object(h.jsxs)(d,{light:this.state.light,children:[this.state.is_logged_in?null:Object(h.jsxs)("div",{className:"d-inline",children:[Object(h.jsx)(z,{handle_login:this.handle_login,className:"btn btn-outline-dark mx-1",children:Object(h.jsx)(p,{light:this.state.light,children:"Login"})}),Object(h.jsx)(H,{handle_signup:this.handle_login,className:"btn btn-warning mx-1",children:"Sign Up"})]}),Object(h.jsx)("button",{onClick:function(){e.setState({light:!e.state.light})},className:"btn btn-outline-dark d-inline mx-1",children:Object(h.jsx)(p,{light:this.state.light,children:"Light"})})]})}),Object(h.jsx)("main",{children:Object(h.jsx)("div",{className:"px-4 py-5 text-center "+(this.state.light?"bg-light":"bg-dark text-white"),children:this.state.is_logged_in?Object(h.jsxs)("div",{children:[this.state.user.student[0].amount_owed?Object(h.jsx)(oe,{money:this.state.user.student[0].amount_owed,sid:this.state.user.student[0].id,api:this.state.api}):null,Object(h.jsx)($,{api:this.state.api}),Object(h.jsx)(ie,{api:this.state.api,light:this.state.light})]}):null})})]})}}]),n}(s.Component),le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,93)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),s(e),r(e),a(e),i(e)}))};n(73);i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(ue,{})}),document.getElementById("root")),le()}},[[74,1,2]]]);
//# sourceMappingURL=main.0e7040bf.chunk.js.map